{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/ilya/Documents/repos/NodeRentFrontEndSources/app/_context/auth/auth-provider.js"],"sourcesContent":["import { createContext, useCallback, useEffect, useState } from \"react\";\n\nexport const AuthContext = createContext();\n\nconst AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [isLoggedInStorage, setIsLoggedInStorage] = useState(() => {\n    if (typeof window === \"undefined\" || !window.localStorage) {\n      return null;\n    }\n\n    const persistedValue =\n      typeof window !== \"undefined\"\n        ? window.localStorage.getItem(\"IS_LOGGED_IN\")\n        : null;\n\n    return persistedValue !== null ? JSON.parse(persistedValue) : false;\n  });\n\n  const getSession = useCallback(async () => {\n    const response = await (\n      await fetch(\"https://api.noderent.pro/sessionInfo\", {\n        method: \"GET\",\n        credentials: \"include\",\n      })\n    ).json();\n\n    if (response.status === \"success\") {\n      setUser(response.user_data);\n      localStorage.setItem(\"IS_LOGGED_IN\", \"true\");\n    } else {\n      setUser(null);\n      setIsLoggedInStorage(false);\n      localStorage.setItem(\"IS_LOGGED_IN\", \"false\");\n    }\n  }, []);\n\n  const logout = useCallback(() => {\n    setUser(null);\n    setIsLoggedInStorage(false);\n    localStorage.setItem(\"IS_LOGGED_IN\", \"false\");\n    window.location.href = \"/\";\n  }, []);\n\n  useEffect(() => {\n    getSession();\n  }, []);\n\n  return (\n    <AuthContext.Provider\n      value={{ user, logout, isLoggedIn: !!user || isLoggedInStorage }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthProvider;\n"],"names":[],"mappings":";;;;;AAAA;;;;AAEO,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD;AAEvC,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAE;;IAChC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD;iCAAE;YACzD,IAAI,aAAkB,eAAe,CAAC,OAAO,YAAY,EAAE;gBACzD,OAAO;YACT;YAEA,MAAM,iBACJ,uCACI,OAAO,YAAY,CAAC,OAAO,CAAC;YAGlC,OAAO,mBAAmB,OAAO,KAAK,KAAK,CAAC,kBAAkB;QAChE;;IAEA,MAAM,aAAa,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;gDAAE;YAC7B,MAAM,WAAW,MAAM,CACrB,MAAM,MAAM,wCAAwC;gBAClD,QAAQ;gBACR,aAAa;YACf,EACF,EAAE,IAAI;YAEN,IAAI,SAAS,MAAM,KAAK,WAAW;gBACjC,QAAQ,SAAS,SAAS;gBAC1B,aAAa,OAAO,CAAC,gBAAgB;YACvC,OAAO;gBACL,QAAQ;gBACR,qBAAqB;gBACrB,aAAa,OAAO,CAAC,gBAAgB;YACvC;QACF;+CAAG,EAAE;IAEL,MAAM,SAAS,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;4CAAE;YACzB,QAAQ;YACR,qBAAqB;YACrB,aAAa,OAAO,CAAC,gBAAgB;YACrC,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;2CAAG,EAAE;IAEL,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR;QACF;iCAAG,EAAE;IAEL,qBACE,6LAAC,YAAY,QAAQ;QACnB,OAAO;YAAE;YAAM;YAAQ,YAAY,CAAC,CAAC,QAAQ;QAAkB;kBAE9D;;;;;;AAGP;GAnDM;KAAA;uCAqDS"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}